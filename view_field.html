<body data-url="$1225050902$">
    <p>ðŸ”„ HÃ¤mtar frÃ¥n URL satt i attribut...</p>
    <script>
        async function fetchFromDynamicAttribute() {
        const url = document.body.getAttribute('data-url');
        if (!url || url.includes('$')) {
            sendError('Ingen giltig URL hittades i attributet.');
            return;
        }

        console.log('ðŸ”— Startar fetch:', url);

        try {
            const response = await fetch(url, {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json'
            },
            credentials: 'include'
            });

            console.log('ðŸ“¥ Fetch klart, status:', response.status);

            if (!response.ok) {
            throw new Error(`HTTP error: ${response.status}`);
            }

            const data = await response.json();
            console.log('ðŸ“¦ Data mottagen:', data);

            const payload = JSON.stringify(data);

            if (parent?.DView?.SendSignalToParent) {
            console.log('ðŸ“¤ Skickar AREvent FetchResult till formulÃ¤r');
            parent.DView.SendSignalToParent(undefined, 'FetchResult', payload);
            }

        } catch (err) {
            sendError(err.message);
        }
        }

  
      window.addEventListener('DOMContentLoaded', fetchFromDynamicAttribute);
    </script>
  </body>
  