<body data-url="$1225050902$">
    <p>ðŸ”„ Fetching from URL set in attribute...</p>
    <script>
      async function fetchFromDynamicAttribute() {
        const url = document.body.getAttribute('data-url');
        if (!url || url.includes('$')) {
          sendError('No valid URL found in the attribute.');
          return;
        }
  
        console.log('ðŸ”— Starting fetch:', url);
  
        try {
          const response = await fetch(url, {
            method: 'GET',
            headers: {
              'Content-Type': 'application/json'
            },
            credentials: 'include'
          });
  
          console.log('ðŸ“¥ Fetch complete, status:', response.status);
  
          if (!response.ok) {
            throw new Error(`HTTP error: ${response.status}`);
          }
  
          const data = await response.json();
          console.log('ðŸ“¦ Data received:', data);
  
          const payload = JSON.stringify(data);
  
          if (parent?.DView?.SendSignalToParent) {
            console.log('ðŸ“¤ Sending AREvent FetchResult to the form');
            parent.DView.SendSignalToParent(undefined, 'FetchResult', payload);
          }
  
        } catch (err) {
          sendError(err.message);
        }
      }
  
      function sendError(message) {
        if (parent?.DView?.SendSignalToParent) {
          parent.DView.SendSignalToParent(undefined, 'FetchError', message);
        }
      }
  
      window.addEventListener('DOMContentLoaded', fetchFromDynamicAttribute);
    </script>
  </body>
  